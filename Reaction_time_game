from pitop import Pitop, Button, LED
from time import sleep
import random
import time
x = False
y = False
z = False
pitop = Pitop()
screen = pitop.miniscreen
led_red = LED("D0")
led_green = LED("D1")
btn = Button("D2")


screen.display_text("Click button to begin")
while not screen.cancel_button.is_pressed:
    while x == False and y == False and z == False:
        led_green.off() and led_red.off()
        if btn.is_pressed:
            x = True
    while x and y == False and z == False:
        screen.display_text("Click when green")
        led_red.on()
        sleep(.5)
        num = random.randint(1,10)
        print(num)
        sleep(0.5)
        while num != 0:
            if btn.is_pressed:
                screen.display_text("Too fast")
            num -= 1
            if num == 1:
                y = True
        sleep(.5)
        led_green.on()
        start_time = time.time()
    while x and y and z == False:
        if btn.is_pressed:
            led_red.off()
            end_time = time.time()
            elapsed_time = (end_time - start_time)
            z = True
    while x and y and z:
        screen.display_text(f"Elapsed time: {elapsed_time:.2f} seconds")
        sleep(.5)
        if btn.is_pressed:
            x = False
            y = False
            z = False
